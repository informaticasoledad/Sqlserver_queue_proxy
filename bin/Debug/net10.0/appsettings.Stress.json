{
  "Logging": {
    "LogLevel": {
      "Default": "Warning",
      "Microsoft.Hosting.Lifetime": "Information"
    }
  },
  "Proxy": {
    "ListeningPort": 14330,
    "WorkerCount": 256,
    "ChannelCapacity": 25000,
    "MetricsReportIntervalSeconds": 3,
    "QueueEngine": "RabbitMq",
    "EnableMarsPassthrough": false,
    "ForceQueueOnly": false,
    "FallbackToPassthroughOnEncryptOff": true,
    "TargetHost": "127.0.0.1",
    "TargetPort": 1433,
    "TargetConnectMaxRetries": 6,
    "TargetConnectRetryDelayMs": 100,
    "MaxTargetConnections": 8000,
    "MinInFlightRequests": 128,
    "MaxInFlightRequests": 2048,
    "AdaptiveBackpressureEnabled": true,
    "QueueLowWatermark": 3000,
    "QueueHighWatermark": 12000,
    "TargetLatencyLowMs": 80,
    "TargetLatencyHighMs": 400,
    "RequestProcessingRetries": 1,
    "RequestRetryDelayMs": 25,
    "PendingRequestTtlSeconds": 120,
    "Tls": {
      "Enabled": false,
      "CertificatePath": "",
      "CertificatePassword": "",
      "ClientCertificateRequired": false,
      "CheckCertificateRevocation": false,
      "HandshakeTimeoutSeconds": 20
    },
    "RabbitMq": {
      "UseTls": false,
      "TlsServerName": "",
      "TlsAcceptInvalidCertificates": false,
      "HostName": "localhost",
      "Port": 5672,
      "UserName": "guest",
      "Password": "guest",
      "VirtualHost": "/",
      "QueueName": "tdsqueue.proxy.requests.stress",
      "Durable": true,
      "PrefetchCount": 1000,
      "PublishBatchSize": 256,
      "PublishBatchMaxDelayMs": 2,
      "PublishMaxRetries": 3,
      "PublishRetryDelayMs": 50,
      "ConsumeMaxRetries": 5,
      "ConsumeRetryDelayMs": 100,
      "ConsumerChannelRestartDelayMs": 200,
      "RequeueOnFailure": true
    },
    "Redis": {
      "UseTls": false,
      "SslHost": "",
      "AbortOnConnectFail": false,
      "Configuration": "localhost:6379",
      "QueueKey": "tdsqueue:requests:stress",
      "ProcessingQueueKey": "tdsqueue:requests:stress:processing",
      "PopBlockTimeoutSeconds": 1,
      "EnqueueMaxRetries": 4,
      "EnqueueRetryDelayMs": 50,
      "ConsumeMaxRetries": 6,
      "ConsumeRetryDelayMs": 100,
      "RequeueOnFailure": true
    },
    "CircuitBreakerFailuresThreshold": 100,
    "CircuitBreakerOpenSeconds": 5,
    "EnforceClientAllowlist": false,
    "AllowedClientCidrs": [
      "0.0.0.0/0"
    ],
    "MaxReplayAttempts": 2,
    "FaultInjection": {
      "Enabled": false,
      "ThrowProbability": 0.02,
      "DelayProbability": 0.1,
      "DelayMs": 20
    }
  },
  "Observability": {
    "HealthPort": 18082,
    "EnableOtlpExporter": false,
    "OtlpEndpoint": "http://localhost:4317",
    "EnableAdminEndpoint": true,
    "AdminToken": "stress-admin-token"
  }
}
