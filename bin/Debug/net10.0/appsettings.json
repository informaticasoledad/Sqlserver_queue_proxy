{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.Hosting.Lifetime": "Information"
    }
  },
  "Proxy": {
    "ListeningPort": 14330,
    "WorkerCount": 64,
    "ChannelCapacity": 1000,
    "MetricsReportIntervalSeconds": 10,
    "QueueEngine": "Channel",
    "EnableMarsPassthrough": false,
    "ForceQueueOnly": false,
    "FallbackToPassthroughOnEncryptOff": true,
    "EnforceClientAllowlist": false,
    "AllowedClientCidrs": [
      "127.0.0.1/32"
    ],
    "TargetHost": "sqlserver04.gruposoledad.com",
    "TargetPort": 1433,
    "TargetConnectMaxRetries": 5,
    "TargetConnectRetryDelayMs": 200,
    "MaxTargetConnections": 2000,
    "MinInFlightRequests": 16,
    "MaxInFlightRequests": 256,
    "AdaptiveBackpressureEnabled": true,
    "QueueLowWatermark": 100,
    "QueueHighWatermark": 500,
    "TargetLatencyLowMs": 120,
    "TargetLatencyHighMs": 800,
    "RequestProcessingRetries": 2,
    "RequestRetryDelayMs": 50,
    "MaxReplayAttempts": 3,
    "PendingRequestTtlSeconds": 120,
    "Tls": {
      "Enabled": false,
      "CertificatePath": "",
      "CertificatePassword": "",
      "ClientCertificateRequired": false,
      "CheckCertificateRevocation": true,
      "HandshakeTimeoutSeconds": 20
    },
    "RabbitMq": {
      "HostName": "localhost",
      "Port": 5672,
      "UserName": "guest",
      "Password": "guest",
      "VirtualHost": "/",
      "QueueName": "tdsqueue.proxy.requests",
      "Durable": true,
      "PrefetchCount": 100,
      "PublishBatchSize": 64,
      "PublishBatchMaxDelayMs": 5,
      "PublishMaxRetries": 5,
      "PublishRetryDelayMs": 100,
      "ConsumeMaxRetries": 5,
      "ConsumeRetryDelayMs": 200,
      "ConsumerChannelRestartDelayMs": 500,
      "RequeueOnFailure": true,
      "UseTls": false,
      "TlsServerName": "",
      "TlsAcceptInvalidCertificates": false
    },
    "Redis": {
      "Configuration": "localhost:6379",
      "QueueKey": "tdsqueue:requests",
      "ProcessingQueueKey": "tdsqueue:requests:processing",
      "PopBlockTimeoutSeconds": 1,
      "EnqueueMaxRetries": 5,
      "EnqueueRetryDelayMs": 100,
      "ConsumeMaxRetries": 5,
      "ConsumeRetryDelayMs": 200,
      "RequeueOnFailure": true,
      "UseTls": false,
      "SslHost": "",
      "AbortOnConnectFail": false
    },
    "FaultInjection": {
      "Enabled": false,
      "ThrowProbability": 0,
      "DelayProbability": 0,
      "DelayMs": 50
    },
    "CircuitBreakerFailuresThreshold": 20,
    "CircuitBreakerOpenSeconds": 30
  },
  "Observability": {
    "HealthPort": 18080,
    "EnableOtlpExporter": false,
    "OtlpEndpoint": "http://localhost:4317",
    "EnableAdminEndpoint": false,
    "AdminToken": "${ENV:TDS_PROXY_ADMIN_TOKEN}"
  }
}
